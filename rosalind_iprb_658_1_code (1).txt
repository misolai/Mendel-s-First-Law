>>> def f(x,y,z):
...     s = x + y + z
...     c = s * (s - 1) / 2.0
...     p = 1 - (z * (z - 1) / 2 + 0.25 * y * (y - 1) / 2 + y * z * 0.5) / c
...     return p
...
>>> f(29,18,21)
0.8080553116769096
>>>